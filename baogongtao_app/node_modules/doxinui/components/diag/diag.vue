<template>
	<div class="dxi-diag" :class="[myclass]" v-if="thisDiag || open" :style="{alignItems: top!=0 ?'flex-start':'center',marginTop: top!=0 ? top :''}" @touchmove.stop.prevent="moveHandle">
		<div class="overlay" v-if="overlay"  @click="overlayhide == true?toggleDiag():''"></div>
		<div class="dxi-diag-box" :class="{dxiMargin:bottomOFF}" :style="{backgroundColor:bgColor,padding:`${tbPadding*2}rpx ${lrPadding*2}rpx`,borderRadius:borderR*2+'rpx',width:width}">
			<div class="diag-title" :class="{'titBold':titBold}" v-if="title" :style="{fontSize:titSize*2+'rpx',color:titColor,textAlign:titAlign,lineHeight:titLH}">{{ title }}</div>
			<slot></slot>
			<div class="off-icon" :class="bottomOFF?'btm-off':'tr-off'" @click="toggleDiag" v-if="OFFicon">
				<text class="dxi-icon dxi-icon-off fw-bold" :style="{fontSize:bottomOFF?32+'rpx':30+'rpx',color:bottomOFF?'#fff':'#666'}"></text>
			</div>
		</div>
	</div>
</template>

<script>
	import dxButton from "doxinui/components/button/button"
	export default{
		components:{dxButton},
		props: {
			// 自定义类名
			myclass:{
				type: String, 
				default: ''
			},
			overlayhide:{
				type:Boolean,
				default: false
			},
			overlay:{
				type: Boolean,
				default: true
			},
			bgColor:{
				type:String,
				default:'#ffffff'
			},
			// 整框左右距离
			lrPadding:{
				type:Number,
				default: 15
			},
			// 整框上下距离
			tbPadding:{
				type:Number,
				default: 20
			},
			borderR:{
				type:Number,
				default: 6
			},
			width:{
				type:String,
				default: '80%'
			},
			open:{
				type:Boolean,
				default: false
			},
			top:{
				type:String,
				default: '0'
			},
			bottomOFF: {
				type: Boolean,
				default: true
			},
			OFFicon:{
				type: Boolean,
				default: true
			},
			title:{
				type:String,
				default: ''
			},
			titSize:{
				type:Number,
				default: 18
			},
			titColor:{
				type:String,
				default: '#333'
			},
			titAlign:{
				type: String,
				default: 'center'
			},
			titLH:{
				type:String,
				default:'2',
			},
			titBold:{
				type:Boolean,
				default: true
			},
		},
		data(){
			return {
				thisDiag: false,
			}
		},
		methods:{
			toggleDiag() {
				this.thisDiag = false;
				this.open = false;
				this.$emit('callBack');
			},
			ajax() {
				this.thisDiag = true;
				if(this.thisDiag == true){
					document.body.style.overflow = 'hidden'
				}
			}
		}
	}
</script>
<style>
@import url("../../css/global_icon.css");
.overlay{position: fixed;top: 0px;right: 0;bottom: 0;left: 0;z-index: 999;width: 100%;background: #333;filter: alpha(opacity=70);opacity: 0.7;}
.dxi-diag{position: fixed;top: 0;right: 0;bottom: 0;left: 0;z-index: 999;display: flex;justify-content: center;}
.dxi-diag-box{padding: 50px;background-color: #fff;z-index: 9999;animation-duration: 0.2s;animation-name: diagBox;position: relative;}
.dxiMargin{margin-bottom: 120rpx;}
.dxi-diag .diag-title.titBold{font-weight: bold;}
.dxi-diag .off-icon{display: flex;justify-content: center;align-items: center;}
.dxi-diag .off-icon .dxi-icon{line-height: 1;}
.dxi-diag .btm-off{position: absolute;bottom: -120rpx;left: 50%;margin-left: -38rpx;width: 76rpx;height: 76rpx;border: 4rpx #fff solid;border-radius: 50%;}
.dxi-diag .tr-off{position: absolute;top: 0;right: 0;width: 80rpx;height: 80rpx;}

@keyframes diagBox {

	from,
	20%,
	40%,
	60%,
	80%,
	to {
		-webkit-animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
		animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
	}

	0% {
		opacity: 0;
		-webkit-transform: scale3d(0, 0, 0);
		transform: scale3d(0, 0, 0);
	}

	20% {
		opacity: 0.2;
		-webkit-transform: scale3d(0.2, 0.2, 0.2);
		transform: scale3d(0.2, 0.2, 0.2);
	}

	40% {
		opacity: 0.4;
		-webkit-transform: scale3d(0.4, 0.4, 0.4);
		transform: scale3d(0.4, 0.4, 0.4);
	}

	60% {
		opacity: 0.6;
		-webkit-transform: scale3d(0.6, 0.6, 0.6);
		transform: scale3d(0.6, 0.6, 0.6);
	}

	80% {
		opacity: 0.8;
		-webkit-transform: scale3d(0.8, 0.8, 0.8);
		transform: scale3d(0.8, 0.8, 0.8);
	}

	to {
		opacity: 1;
		-webkit-transform: scale3d(1, 1, 1);
		transform: scale3d(1, 1, 1);
	}
}


@keyframes bounceOut {
	20% {
		-webkit-transform: scale3d(0.9, 0.9, 0.9);
		transform: scale3d(0.9, 0.9, 0.9);
	}

	50%,
	55% {
		opacity: 1;
		-webkit-transform: scale3d(1.1, 1.1, 1.1);
		transform: scale3d(1.1, 1.1, 1.1);
	}

	to {
		opacity: 0;
		-webkit-transform: scale3d(0.3, 0.3, 0.3);
		transform: scale3d(0.3, 0.3, 0.3);
	}
}

</style>