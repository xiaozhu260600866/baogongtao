<template>
	<view class="dxi-LRdrawer" :class="[visible ? 'dxi-LRdrawer-show' : '','dxi-LRdrawer-' + mode,myclass]">
		<view v-if="mask" class="dxi-LRdrawer-mask" @click="maskClose==true?maskHide():''" @touchmove.stop.prevent></view>
		<view class="dxi-LRdrawer-container" @touchmove.stop.prevent :style="{width:width,backgroundColor:bgColor,zIndex:zIndex}">
			<slot></slot>
		</view>
	</view>
</template>

<script>
	export default {
		props: {
			myclass:{
				type: String, 
				default: ''
			},
			visible: {
				type: Boolean,
				default: false
			},
			mask: {
				type: Boolean,
				default: true
			},
			maskClose: {
				type: Boolean,
				default: true
			},
			mode: {
				type: String,
				default: 'left' // left right
			},
			width:{
				type: String,
				default: '50%'
			},
			bgColor:{
				type:String,
				default:'#fff'
			},
			zIndex:{
				type: Number,
				default: 99
			}
		},
		data() {
			return {
				// LRdrawer:false,
			}
		},
		methods: {
			handleMaskClick() {
				if (!this.maskClosable) {
					return;
				}
				this.$emit('close', {});
			},
			maskHide(){
				console.log(55555555)
				this.visible = false;
				this.$emit('click');
			}
		}
	}
</script>
<style>
.dxi-LRdrawer{visibility: hidden;}
.dxi-LRdrawer-show{visibility: visible;}
.dxi-LRdrawer-show .dxi-LRdrawer-mask{display: block;opacity: 1;}
.dxi-LRdrawer-show .dxi-LRdrawer-container{opacity: 1;}
.dxi-LRdrawer-show.dxi-LRdrawer-left .dxi-LRdrawer-container,
.dxi-LRdrawer-show.dxi-LRdrawer-right .dxi-LRdrawer-container{transform: translate3d(0, -50%, 0);}
.dxi-LRdrawer-mask{opacity: 0;position: fixed;top: 0;left: 0;right: 0;bottom: 0;z-index: 8888;background: rgba(0, 0, 0, 0.6);transition: all 0.3s ease-in-out;cursor: pointer;}
.dxi-LRdrawer-container{position: fixed;left: 50%;height: 100.2%;top: 0;transform: translate3d(-50%, -50%, 0);transform-origin: center;transition: all 0.3s ease-in-out;z-index: 99999;opacity: 0;overflow-y: scroll;-webkit-overflow-scrolling: touch;-ms-touch-action: pan-y cross-slide-y;-ms-scroll-chaining: none;-ms-scroll-limit: 0 50 0 50;}
.dxi-LRdrawer-left .dxi-LRdrawer-container{left: 0;top: 50%;transform: translate3d(-100%, -50%, 0);}
.dxi-LRdrawer-right .dxi-LRdrawer-container{right: 0;top: 50%;left: auto;transform: translate3d(100%, -50%, 0);}
</style>