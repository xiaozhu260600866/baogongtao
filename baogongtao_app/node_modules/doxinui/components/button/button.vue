<template>
	<form class="form" @submit="formType=='submit'?formSubmit() :''" :class="[block?'is-block':'',]">
		<button class="dxi-btn" :open-type="openType" :class="[type?'dxi-btn-'+type:'',size?'dxi-btn-'+size:'',round?'is-round':'',plain?'is-plain':'',selfDisabled?'is-disabled':'',fixed?'fixed':'',circle?'is-circle':'',hollow?'is-hollow':'',myclass,]" :disabled="selfDisabled" @tap="handleClick" @getphonenumber="bingGetPhoneNumber" @getuserinfo="bindgetuserinfo" :form-type="formType" :style="{backgroundColor:btnBg,borderColor:btnBd,}">
			<text :class="['iconfont',icon]" v-if="icon"></text>
			<text class="dxi-icon dxi-icon-loading icon-loading" v-if="loading"></text>
			<text :style="{fontSize:txtSize,color:txtColor}" v-if="!text && !circle"><slot></slot></text>
			<text :style="{fontSize:txtSize,color:txtColor}" v-if="text && !circle">{{text}}</text>
		</button>
	</form>
</template>

<script>
	export default{
		props:{
			openType:{
				type: String, 
				default: ''
			},
			// 自定义类名
			myclass:{
				type: String, 
				default: ''
			},
			// 类型
			type: {
				type: String, 
				default: ''
			},
			// 尺寸
			size: {
				type: String,
				default: ''
			},
			// 是否圆角
			round: {
				type: Boolean,
				default: false
			},
			// 是否占满行
			block: {
				type: Boolean,
				default: false
			},
			// 是否朴素
			plain: {
				type: Boolean,
				default: false
			},
			// 是否禁用
			disabled: {
				type: Boolean,
				default: false
			},
			// 图标
			icon: {
				type: String,
				default: ''
			},
			// 是否固定于脚部
			fixed: {
				type: Boolean,
				default: false
			},
			// 是否加载中状态
			loading: {
				type: Boolean,
				default: false
			},
			// 是否圆形
			circle: {
				type: Boolean,
				default: false
			},
			// 是否空心
			hollow: {
				type: Boolean,
				default: false
			},
			// 是否提交
			formType: {
				type: String,
				default: ''
			},
			// 插入文本
			text: {
				type: String,
				default: ''
			},
			// 字体大小
			txtSize:{
				type: String,
				default: ''
			},
			// 字体颜色
			txtColor:{
				type: String,
				default: ''
			},
			// 插入文本
			btnBg: {
				type: String,
				default: ''
			},
			btnBd: {
				type: String,
				default: ''
			},
		},
		data(){
			return {
				selfDisabled: this.disabled
			}
		},
		watch:{
			disabled(value){
				this.selfDisabled = value;
			},
			loading(value){
				if(value) this.selfDisabled = true;
				else this.selfDisabled = false;
			}
		},
		mounted(){
			if(this.loading){
				this.selfDisabled = true;
			}
		},
		methods:{
			handleClick() {
				if(this.formType!='submit'){
					if (this.selfDisabled) {
						return false;
					}
					this.$emit('click', {})
				}
			},
			bingGetPhoneNumber(e) {
				this.$emit('getPhoneNumber', e);
				this.$emit('getphonenumber', e);
			},
			bindgetuserinfo({
				detail = {}
			} = {}) {
				this.$emit('getuserinfo', detail);
			},
			formSubmit(){
				console.log(2)
				this.$emit('submit', {})
			}
		}
	}
</script>
<style>
@import url("../../css/global_icon.css");
.dxi-btn{display: inline-flex;line-height: 1;white-space: nowrap;cursor: pointer;background: #fff;border: 1px solid #dcdfe6;color: #606266;-webkit-appearance: none;text-align: center;box-sizing: border-box;outline: none;margin: 0;transition: .1s;font-weight: 500;-moz-user-select: none;-webkit-user-select: none;-ms-user-select: none;padding: 24upx 40upx;font-size: 15px;border-radius: 8upx;}
.dxi-btn:after{border: 0;}

/* 加载中 */
.icon-loading{animation: rotating 2s linear infinite;margin-right: 6upx;}
@keyframes rotating {
		0% {
		transform:rotate(0deg)
	}
	to {
		transform:rotate(1turn)
	}
}

/* 其他 */
/*  #ifndef  MP-WEIXIN */
.form{display: inline-block;}
.form>/deep/span{display: inline-flex;}
.form.is-block{display: flex;width: 100%;justify-content: center;}
.is-block>/deep/span{display: flex;width: 100%;justify-content: center;}
.is-block .dxi-btn{display: flex;width: 100%;justify-content: center;}
/* #endif */

/* 固定于脚部 */
.fixed{position: fixed;bottom: 0;left: 0;width: 100%;}

/* 按钮 */
.dxi-btn .iconfont{margin-right: 10upx;}

/* 长按钮 */
.is-block .dxi-btn{display: block}

/* 大小 */
.dxi-btn-lg{padding: 30upx 40upx;font-size: 17px;border-radius: 10upx}
.dxi-btn-medium{padding: 20upx 40upx;font-size: 14px;border-radius: 8upx}
.dxi-btn-small{padding: 18upx 30upx;font-size: 13px;border-radius: 6upx}
.dxi-btn-mini{padding: 14upx 30upx;font-size: 12px;border-radius: 6upx}

/* 圆角大小 */
.dxi-btn.is-round{border-radius: 50upx;padding: 24upx 46upx;}
.dxi-btn-medium.is-round{padding: 20upx 40upx}
.dxi-btn-small.is-round{padding: 18upx 30upx}
.dxi-btn-mini.is-round{padding: 14upx 30upx}

/* 圆圈按钮大小 */
.dxi-btn.is-circle{border-radius: 50%;padding: 24upx;}
.dxi-btn-lg.is-circle{padding: 32upx}
.dxi-btn-medium.is-circle{padding: 20upx}
.dxi-btn-small.is-circle{padding: 18upx}
.dxi-btn-mini.is-circle{padding: 14upx;}

/* 圆圈按钮字体大小 */
.dxi-btn.is-circle .iconfont{margin-right: 0;font-size: 14px;display: flex;}
.dxi-btn-lg.is-circle .iconfont{font-size: 16px;}
.dxi-btn-small.is-circle .iconfont{font-size: 13px;}
.dxi-btn-mini.is-circle .iconfont{font-size: 24upx;}

/* 状态 */

/* ===== 常规组合:start ===== */
	/* 默认 */
	.dxi-btn:focus,.dxi-btn:hover {color:#409eff;border-color:#c6e2ff;background-color:#ecf5ff}
	.dxi-btn:active {color:#3a8ee6;border-color:#3a8ee6;outline:none}

	/* 蓝色 primary */
	.dxi-btn-primary {color:#fff;background-color:#409eff;border-color:#409eff}
	.dxi-btn-primary:focus,.dxi-btn-primary:hover {background:#66b1ff;border-color:#66b1ff;color:#fff}
	.dxi-btn-primary:active {outline:none}

	/* 绿色 success*/
	.dxi-btn-success {color:#fff;background-color:#07c160;border-color:#07c160}
	.dxi-btn-success:focus,.dxi-btn-success:hover {background:#37be78;border-color:#37be78;color:#fff}
	.dxi-btn-success:active {outline:none}

	/* 橙色 warning*/
	.dxi-btn-warning {color:#fff;background-color:#e6a23c;border-color:#e6a23c}
	.dxi-btn-warning:focus,.dxi-btn-warning:hover {background:#ebb563;border-color:#ebb563;color:#fff}
	.dxi-btn-warning:active {outline:none}

	/* 红色 danger*/
	.dxi-btn-danger {color:#fff;background-color:#f56c6c;border-color:#f56c6c}
	.dxi-btn-danger:focus,.dxi-btn-danger:hover {background:#f78989;border-color:#f78989;color:#fff}
	.dxi-btn-danger:active {outline:none}

	/* 灰色 info*/
	.dxi-btn-info {color:#fff;background-color:#909399;border-color:#909399}
	.dxi-btn-info:focus,.dxi-btn-info:hover {background:#a6a9ad;border-color:#a6a9ad;color:#fff}
	.dxi-btn-info:active {outline:none}
/* ===== 常规组合:end ===== */

/* ===== 朴素组合:start ===== */
	/* 默认 */
	.dxi-btn.is-plain:focus,.dxi-btn.is-plain:hover {background:#fff;border-color:#409eff;color:#409eff}
	.dxi-btn.is-plain:active {background:#fff;outline:none}
	.dxi-btn.is-active,.dxi-btn.is-plain:active {border-color:#3a8ee6;color:#3a8ee6}
	
	/* 蓝色 */
	.dxi-btn-primary.is-plain {color:#409eff;background:#ecf5ff;border-color:#b3d8ff}
	.dxi-btn-primary.is-plain:focus,.dxi-btn-primary.is-plain:hover {background:#409eff;border-color:#409eff;color:#fff}
	.dxi-btn-primary.is-plain:active {background:#3a8ee6;border-color:#3a8ee6;color:#fff;outline:none}
	
	/* 绿色 */
	.dxi-btn-success.is-plain {color:#07c160;background:#f0f9eb;border-color:#c2e7b0}
	.dxi-btn-success.is-plain:focus,.dxi-btn-success.is-plain:hover {background:#07c160;border-color:#07c160;color:#fff}
	.dxi-btn-success.is-plain:active {background:#37be78;border-color:#37be78;color:#fff;outline:none}
	/* 橙色 */
	.dxi-btn-warning.is-plain {color:#e6a23c;background:#fdf6ec;border-color:#f5dab1}
	.dxi-btn-warning.is-plain:focus,.dxi-btn-warning.is-plain:hover {background:#e6a23c;border-color:#e6a23c;color:#fff}
	.dxi-btn-warning.is-plain:active {background:#cf9236;border-color:#cf9236;color:#fff;outline:none}
	
	/* 红色 */
	.dxi-btn-danger.is-plain {color:#f56c6c;background:#fef0f0;border-color:#fbc4c4}
	.dxi-btn-danger.is-plain:focus,.dxi-btn-danger.is-plain:hover {background:#f56c6c;border-color:#f56c6c;color:#fff}
	.dxi-btn-danger.is-plain:active {background:#dd6161;border-color:#dd6161;color:#fff;outline:none}
	
	/* 灰色 */
	.dxi-btn-info.is-plain {color:#909399;background:#f4f4f5;border-color:#d3d4d6}
	.dxi-btn-info.is-plain:focus,.dxi-btn-info.is-plain:hover {background:#909399;border-color:#909399;color:#fff}
	.dxi-btn-info.is-plain:active {background:#82848a;border-color:#82848a;color:#fff;outline:none}
/* ===== 朴素组合:end ===== */


/* ===== 空心组合:start ===== */
	/* 默认 */
	.dxi-btn.is-hollow:focus,.dxi-btn.is-hollow:hover {color:#409eff;border-color:#c6e2ff;background-color:#fff}
	.dxi-btn.is-hollow:active {color:#3a8ee6;border-color:#3a8ee6;outline:none}
	
	/* 蓝色 primary */
	.dxi-btn-primary.is-hollow {color:#409eff;background-color:#fff;border-color:#409eff}
	.dxi-btn-primary.is-hollow:focus,.dxi-btn-primary.is-hollow:hover {background:#fff;border-color:#66b1ff;color:#66b1ff}
	.dxi-btn-primary.is-hollow:active {outline:none}
	
	/* 绿色 success*/
	.dxi-btn-success.is-hollow {color:#07c160;background-color:#fff;border-color:#07c160}
	.dxi-btn-success.is-hollow:focus,.dxi-btn-success.is-hollow:hover {background:#fff;border-color:#37be78;color:#37be78}
	.dxi-btn-success.is-hollow:active {outline:none}
	
	/* 橙色 warning*/
	.dxi-btn-warning.is-hollow {color:#e6a23c;background-color:#fff;border-color:#e6a23c}
	.dxi-btn-warning.is-hollow:focus,.dxi-btn-warning.is-hollow:hover {background:#fff;border-color:#ebb563;color:#ebb563}
	.dxi-btn-warning.is-hollow:active {outline:none}
	
	/* 红色 danger*/
	.dxi-btn-danger.is-hollow {color:#f56c6c;background-color:#fff;border-color:#f56c6c}
	.dxi-btn-danger.is-hollow:focus,.dxi-btn-danger.is-hollow:hover {background:#fff;border-color:#f78989;color:#f78989}
	.dxi-btn-danger.is-hollow:active {outline:none}
	
	/* 灰色 info*/
	.dxi-btn-info.is-hollow {color:#909399;background-color:#fff;border-color:#909399}
	.dxi-btn-info.is-hollow:focus,.dxi-btn-info.is-hollow:hover {background:#fff;border-color:#a6a9ad;color:#a6a9ad}
	.dxi-btn-info.is-hollow:active {outline:none}
/* ===== 空心组合:end ===== */


/* ===== 禁用组合:start ===== */
	/* 常规 */
	.dxi-btn.is-disabled,
	.dxi-btn.is-disabled:focus,
	.dxi-btn.is-disabled:hover,
	.dxi-btn.is-disabled[disabled] {
		color:#c0c4c;
		cursor:not-allowed;
		background-image:none;
		background-color:#fff;
		border-color:#ebeef5
	}
	.dxi-btn.is-disabled {
		background-color:transparent
	}
	.dxi-btn.is-disabled.is-plain,
	.dxi-btn.is-disabled.is-plain:focus,
	.dxi-btn.is-disabled.is-plain:hover{
		background-color:#fff;
		border-color:#ebeef5;
		color:#c0c4cc
	}
	
	
	/* 蓝色 */
	.dxi-btn-primary.is-disabled,
	.dxi-btn-primary.is-disabled:active,
	.dxi-btn-primary.is-disabled:focus,
	.dxi-btn-primary.is-disabled:hover,
	.dxi-btn-primary.is-disabled[disabled]{
		color:#fff;
		background-color:#a0cfff;
		border-color:#a0cfff
	}
	.dxi-btn-primary.is-plain.is-disabled,
	.dxi-btn-primary.is-plain.is-disabled:active,
	.dxi-btn-primary.is-plain.is-disabled:focus,
	.dxi-btn-primary.is-plain.is-disabled:hover {
		color:#8cc5ff;
		background-color:#ecf5ff;
		border-color:#d9ecff
	}
	
	/* 绿色 */
	.dxi-btn-success.is-disabled,
	.dxi-btn-success.is-disabled:active,
	.dxi-btn-success.is-disabled:focus,
	.dxi-btn-success.is-disabled:hover,
	.dxi-btn-success.is-disabled[disabled]{
		color:#fff;
		background-color:#85daad;
		border-color:#b3e19d
	}
	.dxi-btn-success.is-plain.is-disabled,
	.dxi-btn-success.is-plain.is-disabled:active,
	.dxi-btn-success.is-plain.is-disabled:focus,
	.dxi-btn-success.is-plain.is-disabled:hover {
		color:#85daad;
		background-color:#f0f9eb;
		border-color:#e1f3d8
	}
	
	/* 橙色 */
	.dxi-btn-warning.is-disabled,
	.dxi-btn-warning.is-disabled:active,
	.dxi-btn-warning.is-disabled:focus,
	.dxi-btn-warning.is-disabled:hover,
	.dxi-btn-warning.is-disabled[disabled]{
		color:#fff;
		background-color:#f3d19e;
		border-color:#f3d19e
	}
	.dxi-btn-warning.is-plain.is-disabled,
	.dxi-btn-warning.is-plain.is-disabled:active,
	.dxi-btn-warning.is-plain.is-disabled:focus,
	.dxi-btn-warning.is-plain.is-disabled:hover {
		color:#f0c78a;
		background-color:#fdf6ec;
		border-color:#faecd8
	}
	
	/* 红色 */
	.dxi-btn-danger.is-disabled,
	.dxi-btn-danger.is-disabled:active,
	.dxi-btn-danger.is-disabled:focus,
	.dxi-btn-danger.is-disabled:hover,
	.dxi-btn-danger.is-disabled[disabled]{
		color:#fff;
		background-color:#fab6b6;
		border-color:#fab6b6
	}
	.dxi-btn-danger.is-plain.is-disabled,
	.dxi-btn-danger.is-plain.is-disabled:active,
	.dxi-btn-danger.is-plain.is-disabled:focus,
	.dxi-btn-danger.is-plain.is-disabled:hover {
		color:#f9a7a7;
		background-color:#fef0f0;
		border-color:#fde2e2
	}
	
	/* 灰色 */
	.dxi-btn-info.is-disabled,
	.dxi-btn-info.is-disabled:active,
	.dxi-btn-info.is-disabled:focus,
	.dxi-btn-info.is-disabled:hover,
	.dxi-btn-info.is-disabled[disabled]{
		color:#fff;
		background-color:#c8c9cc;
		border-color:#c8c9cc
	}
	.dxi-btn-info.is-plain.is-disabled,
	.dxi-btn-info.is-plain.is-disabled:active,
	.dxi-btn-info.is-plain.is-disabled:focus,
	.dxi-btn-info.is-plain.is-disabled:hover {
		color:#bcbec2;
		background-color:#f4f4f5;
		border-color:#e9e9eb
	}
/* ===== 禁用组合:end ===== */

</style>