<template>
	<view class="dxi-price" :class="[myclass]">
		<!-- 分割价格 -->
		
		<view class="split-price Arail" v-if="split" :style="{color:priceColor,lineHeight:lineH}">
			<input class="dx-input"  :value="currentValue"  hidden/>
			<view class="unit" :style="{fontSize:unitSize*2+'rpx'}">￥</view>
			<view class="int" :style="{fontSize:intSize*2+'rpx'}">{{ int }}</view>
			<view class="dot">.</view>
			<view class="decimal" :style="{fontSize: decimalSize*2+'rpx'}">{{ decimal }}</view>
			<view class="oldprice" v-if="oldprice" :style="{fontSize:oldSize*2+'rpx',marginLeft:oldMl*2+'rpx'}">￥{{oldprice}}</view>
		</view>
		<!-- 常规价格 -->
		<view class="routine-price" v-if="!split" :style="{color:priceColor,lineHeight:lineH}">
			<view class="unit" :style="{fontSize:unitSize*2+'rpx'}">￥</view>
			<view class="price" :style="{fontSize:priceSize*2+'rpx'}">{{ currentValue }}</view>
			<view class="oldprice" v-if="oldprice" :style="{fontSize:oldSize*2+'rpx',marginLeft:oldMl*2+'rpx'}">￥{{oldprice}}</view>
		</view>
		<!-- 历史价格 -->
	</view>
</template>

<script>
	import dxIcon from "../icon/icon"
	export default{
		components: {
			dxIcon
		},
		props: {
			// 自定义类名
			myclass:{
				type: String, 
				default: ''
			},
			value: {
				type: String,
				default: ''
			},
			// 颜色
			priceColor: {
				type: String,
				default: '#f31b0c'
			},
			//是否是分割价格
			split: {
				type: Boolean,
				default: false
			},
			// 符号
			unitSize:{
				type: Number,
				default: 12
			},
			// 整数大小
			intSize:{
				type: Number,
				default: 24
			},
			// 小数大小
			decimalSize:{
				type: Number,
				default: 14
			},
			// 价格
			price: {
				type: String,
				default: ''
			},
			// 价格大小
			priceSize: {
				type: Number,
				default: 18
			},
			oldprice:{
				type: String,
				default: ''
			},
			oldSize:{
				type: Number,
				default: 12
			},
			oldMl:{
				type: Number,
				default: 6
			},
			lineH:{
				type: Number,
				default: 1
			}
		},
		data(){
			return {
				int:0,
				decimal:"00"
			}
		},
		methods:{
			
		},
		computed: {
		    currentValue: {
		        // 动态计算currentValue的值
		        get: function() {
					if(this.split){
						
						let amount = parseFloat(this.value);
						amount = amount.toFixed(2);
						
						this.int = amount.split('.')[0];
						this.decimal = amount.split('.')[1];
						console.log(this.decimal);
					}
		            return this.value;
		        },
		        set: function(val) {
					
		            this.$emit('input', val);
		        }
		    }
		}
	}
</script>
<style>
.dxi-price{display: inline-block;}
.dxi-price .split-price{display: flex;align-items: baseline;}
.dxi-price .routine-price{display: flex;align-items: baseline;}
.dxi-price .oldprice{color: #999;text-decoration: line-through;}
</style>