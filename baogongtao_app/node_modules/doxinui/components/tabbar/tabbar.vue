<template>
	<view class="dxi-tabbar" :class="{myclass}" :style="{background:bgColor,}">
		<view class="tabber-border" v-if="border" :style="{background:borderColor,}"></view>
		<block v-for="(item,index) in data" :key="index">
			<view class="tabbar-item" @click="back(item)">
				<view class="tabber_bd">
					<view class="tabbar-icon" :class="{'tabbar-icon-hump':item.hump}">
						<image class="img" :src="current==index?item.selectedImg:item.img " v-if="item.img"
						 :style="{height:iconHeight*2+'rpx',width:iconWidth*2+'rpx',marginTop:iconMT*2+'rpx'}"></image>
						<view class="icon" :class="current==index?item.selectedIcon:item.icon" v-if="item.icon"
						 :style="{color:current==index?selectedIconColor:iconColor,fontSize:iconSize*2+'rpx',lineHeight:iconHeight*2+'rpx',
						height:iconHeight*2+'rpx',width:iconWidth*2+'rpx',marginTop:iconMT*2+'rpx'}"></view>
						<view class="num" v-if="item.num" :style="{color:numColor,background:numBg}">{{ item.num }}</view>
					</view>
					<view class="tabber-name" :style="{color:current==index?selectedNameColor:nameColor,fontSize:nameSize*2+'rpx',
					lineHeight:nameLH,marginTop:nameMT*2+'rpx'}">{{ item.name }}</view>
				</view>
				<view class="hump-bg" :style="{background:humpBg}" v-if="item.hump"></view>
			</view>
		</block>
	</view>
</template>

<script>
	import dxIcon from "../icon/icon"
	export default{
		components: {
			dxIcon
		},
		props: {
			// 自定义类名
			myclass:{
				type: String, 
				default: ''
			},
			//当前索引
			current: {
				type: Number,
				default: 0
			},
			data:{
				type: Array,
				default () {
					return[]
				}
			},
			bgColor:{
				type:String,
				default: '#fff'
			},
			borderColor:{
				type:String,
				default: 'rgba(0, 0, 0, 0.33)'
			},
			border:{
				type:Boolean,
				default: true
			},
			iconHeight:{
				type:Number,
				default: 24
			},
			iconWidth: {
				type:Number,
				default: 24
			},
			iconMT:{
				type:Number,
				default: 5
			},
			iconColor:{
				type: String,
				default: '#333'
			},
			selectedIconColor:{
				type: String,
				default: '#387ef8'
			},
			iconSize:{
				type: Number,
				default: 18
			},
			nameColor:{
				type: String,
				default: '#333'
			},
			selectedNameColor:{
				type: String,
				default: '#387ef8'
			},
			nameSize:{
				type: Number,
				default: 12
			},
			nameLH:{
				type: String,
				default: 'normal'
			},
			nameMT:{
				type: Number,
				default: 3
			},
			numColor:{
				type: String,
				default: '#fff'
			},
			numBg:{
				type: String,
				default: '#F74D54'
			},
			hump:{
				type:Boolean,
				default: false
			},
			humpBg:{
				type: String,
				default: '#5677FC'
			}
			
		},
		data(){
			return {}
		},
		watch: {
			current() {}
		},
		methods:{
			back(item){
				this.$emit('click',item);
			}
		}
	}
</script>
<style>
.dxi-tabbar{position: fixed;bottom: 0;left: 0;width: 100%;display: flex;justify-content: space-around;z-index: 9999;}
.dxi-tabbar .tabber-border{position: absolute;top: 0;left: 0;width: 100%;height: 1rpx;transform: scaleY(.5);}

.tabbar-item,.tabber_bd{display: flex;justify-content: center;align-items: center;}
.tabbar-item{flex: 1;text-align: center;position: relative;padding-bottom: 4rpx;}
.tabber_bd{position: relative;flex-direction: column;}

.tabbar-icon{position: relative;display: inline-block;}
.tabbar-icon.tabbar-icon-hump{margin-top: -30rpx;width: 100rpx;height: 100rpx;border-radius: 50%;display: flex;justify-content: center;align-items: center;z-index: 2;}
.tabbar-icon.tabbar-icon-hump .img,.tabbar-icon.tabbar-icon-hump .icon{margin-top: 0!important;color: #fff!important;}
.tabbar-icon .img{width: 100%;height: 100%;display: flex;}
.tabbar-icon .num{position: absolute;font-size: 20rpx;height: 32rpx;width: 32rpx;border-radius: 50%;right: 0;top: 0;transform: translateX(70%);display: flex;align-items: center;justify-content: center;}

.tabber-name{position: relative;text-align: center;}

.hump-bg{width: 100rpx;height: 100rpx;border-radius: 50%;top: -30rpx;position: absolute;left: 50%;margin-left: -50rpx;z-index: 1;}
</style>